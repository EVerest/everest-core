<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="edm" href="../dev-tools/edm.html"><link rel="prev" title="EVerest APIs" href="../adapt-everest/apis.html">
        <link rel="prefetch" href="../../_static/everest_icon-color.png" as="image">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.12.19 -->
        <title>Energy Management in EVerest - EVerest Manual 2025.12.1</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">EVerest Manual 2025.12.1</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/everest_icon-color.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">EVerest Manual 2025.12.1</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to-guides/getting-started/get-started-sw.html">Get started in Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to-guides/getting-started/get-started-hw.html">Get started with Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/develop-new-module.html">Develop New EVerest Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/ocpp16.html">How To: OCPP 1.6 in EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/ocpp2.html">How To: OCPP 2.0.1 and 2.1 in EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/plug-and-charge.html">Plug&amp;Charge with EVerest Software in the loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/bazel.html">Experimental Bazel Support in EVerest</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how-to-guides/index.html">How To Guides</a><input aria-label="Toggle navigation of How To Guides" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../how-to-guides/documenting-everest/index.html">Documenting EVerest</a><input aria-label="Toggle navigation of Documenting EVerest" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/documenting-everest/extending-everest-documentation.html">Extending the EVerest Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/documenting-everest/change-documentation-quickstart.html">Documenting Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/documenting-everest/sphinx-style-guide.html">Sphinx Style Guide</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../how-to-guides/getting-started/index.html">Getting Started with EVerest</a><input aria-label="Toggle navigation of Getting Started with EVerest" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/getting-started/get-started-sw.html">Get started in Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/getting-started/get-started-hw.html">Get started with Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/error-framework-howto.html">Using the Error Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/configure-pnc.html">Configure Plug&amp;Charge in EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/debug-iso15118.html">Debug ISO 15118</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/debug-modules.html">Debug EVerest Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/yocto-cross-compilation.html">Cross-compilation of EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/eichrecht.html">Eichrecht</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/uk-smart-charging-regulations.html">UK Smart Charging Regulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/renesas-mpu/index.html">How to for Renesas MPU (RZ/G2L family)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/security-best-practices.html">Security Best Practices</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../how-to-guides/bringup/index.html">BringUp &amp; Qualification</a><input aria-label="Toggle navigation of BringUp &amp; Qualification" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/bringup/basic.html">Basic BringUp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/bringup/powermeter.html">BringUp Powermeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/bringup/ac.html">AC BringUp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-to-guides/bringup/dc.html">DC BringUp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../how-to-guides/choosing-version-and-upgrading.html">Choosing an EVerest Version</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Explanation</a><input aria-label="Toggle navigation of Explanation" checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../high-level-overview.html">High-Level Overview of EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-framework.html">Error Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detail-module-concept.html">EVerest Modules in Detail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tier-module-mappings.html">3-tier Module Mappings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../adapt-everest/index.html">Adapt EVerest</a><input aria-label="Toggle navigation of Adapt EVerest" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../adapt-everest/sub-systems.html">Sub-systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../adapt-everest/apis.html">EVerest APIs</a></li>
</ul>
</li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Energy Management in EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev-tools/edm.html">edm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev-tools/ev-cli.html">ev-cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnc-process.html">The Plug&amp;Charge Process in EVerest</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../linux-yocto/index.html">Linux / Yocto</a><input aria-label="Toggle navigation of Linux / Yocto" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../linux-yocto/setting-up-linux-os.html">Setting up the Linux operating system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux-yocto/building-yocto.html">Building Yocto for your custom hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux-yocto/ota-updates.html">Over-the-air-updates (OTA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux-yocto/partitioning-schemes-for-rauc-ota.html">Partitioning schemes for RAUC OTA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-architecture.html">Hardware Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-drivers.html">Hardware Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the-everest-documentation.html">The EVerest Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../powermeter-ocmf.html">Powermeter OCMF Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/index.html">Reference</a><input aria-label="Toggle navigation of Reference" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/modules/index.html">Modules</a><input aria-label="Toggle navigation of Modules" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/API/index.html">API</a><input aria-label="Toggle navigation of API" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/API/autogenerated.html">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/EvAPI/autogenerated.html">EvAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/auth_consumer_API/autogenerated.html">auth_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/auth_token_provider_API/autogenerated.html">auth_token_provider_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/auth_token_validator_API/autogenerated.html">auth_token_validator_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/dc_external_derate_consumer_API/autogenerated.html">dc_external_derate_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/display_message_API/autogenerated.html">display_message_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/error_history_consumer_API/autogenerated.html">error_history_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/evse_board_support_API/autogenerated.html">evse_board_support_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/evse_manager_consumer_API/autogenerated.html">evse_manager_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/external_energy_limits_consumer_API/autogenerated.html">external_energy_limits_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/generic_error_raiser_API/autogenerated.html">generic_error_raiser_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/isolation_monitor_API/autogenerated.html">isolation_monitor_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/ocpp_consumer_API/autogenerated.html">ocpp_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/over_voltage_monitor_API/autogenerated.html">over_voltage_monitor_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/power_supply_DC_API/autogenerated.html">power_supply_DC_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/powermeter_API/autogenerated.html">powermeter_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/session_cost_API/autogenerated.html">session_cost_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/session_cost_consumer_API/autogenerated.html">session_cost_consumer_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/slac_API/autogenerated.html">slac_API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/API/system_API/autogenerated.html">system_API</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/BringUp/index.html">BringUp</a><input aria-label="Toggle navigation of BringUp" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUDCExternalDerate/autogenerated.html">BUDCExternalDerate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUDisplayMessage/autogenerated.html">BUDisplayMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUEvseBoardSupport/autogenerated.html">BUEvseBoardSupport</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUIsolationMonitor/autogenerated.html">BUIsolationMonitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUOcppConsumer/autogenerated.html">BUOcppConsumer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUOverVoltageMonitor/autogenerated.html">BUOverVoltageMonitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUPowerSupplyDC/autogenerated.html">BUPowerSupplyDC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUPowermeter/autogenerated.html">BUPowermeter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUSlac/autogenerated.html">BUSlac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUSystem/autogenerated.html">BUSystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/BringUp/BUTokenProvider/autogenerated.html">BUTokenProvider</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/EV/index.html">EV</a><input aria-label="Toggle navigation of EV" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EV/EvManager/autogenerated.html">EvManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EV/EvSlac/autogenerated.html">EvSlac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EV/PyEvJosev/autogenerated.html">PyEvJosev</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/EVSE/index.html">EVSE</a><input aria-label="Toggle navigation of EVSE" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/Auth/autogenerated.html">Auth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/Evse15118D20/autogenerated.html">Evse15118D20</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/EvseManager/autogenerated.html">EvseManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/EvseSecurity/autogenerated.html">EvseSecurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/EvseSlac/autogenerated.html">EvseSlac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/EvseV2G/autogenerated.html">EvseV2G</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/Iso15118InternetVas/autogenerated.html">Iso15118InternetVas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/IsoMux/autogenerated.html">IsoMux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/OCPP/autogenerated.html">OCPP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/OCPP201/autogenerated.html">OCPP201</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EVSE/StaticISO15118VASProvider/autogenerated.html">StaticISO15118VASProvider</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/EnergyManagement/index.html">EnergyManagement</a><input aria-label="Toggle navigation of EnergyManagement" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EnergyManagement/EnergyManager/autogenerated.html">EnergyManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/EnergyManagement/EnergyNode/autogenerated.html">EnergyNode</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/Examples/index.html">Examples</a><input aria-label="Toggle navigation of Examples" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/index.html">CppExamples</a><input aria-label="Toggle navigation of CppExamples" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/Example/autogenerated.html">Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/ExampleUser/autogenerated.html">ExampleUser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/OCPPExtensionExample/autogenerated.html">OCPPExtensionExample</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/TerminalCostAndPriceMessage/autogenerated.html">TerminalCostAndPriceMessage</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/CppExamples/TerminalDisplayMessage/autogenerated.html">TerminalDisplayMessage</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/Examples/error-framework/index.html">error-framework</a><input aria-label="Toggle navigation of error-framework" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/error-framework/ExampleErrorGlobalSubscriber/autogenerated.html">ExampleErrorGlobalSubscriber</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/error-framework/ExampleErrorRaiser/autogenerated.html">ExampleErrorRaiser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/error-framework/ExampleErrorSubscriber/autogenerated.html">ExampleErrorSubscriber</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/error-framework/PyExampleErrorRaiser/autogenerated.html">PyExampleErrorRaiser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/Examples/error-framework/PyExampleErrorSubscriber/autogenerated.html">PyExampleErrorSubscriber</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/index.html">HardwareDrivers</a><input aria-label="Toggle navigation of HardwareDrivers" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EV/index.html">EV</a><input aria-label="Toggle navigation of EV" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EV/YetiEvDriver/autogenerated.html">YetiEvDriver</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/index.html">EVSE</a><input aria-label="Toggle navigation of EVSE" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/AdAcEvse22KwzKitBSP/autogenerated.html">AdAcEvse22KwzKitBSP</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/MicroMegaWattBSP/autogenerated.html">MicroMegaWattBSP</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/PhyVersoBSP/autogenerated.html">PhyVersoBSP</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/TIDA010939/autogenerated.html">TIDA010939</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/EVSE/YetiDriver/autogenerated.html">YetiDriver</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/IsolationMonitors/index.html">IsolationMonitors</a><input aria-label="Toggle navigation of IsolationMonitors" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/IsolationMonitors/Bender_isoCHA425HV/autogenerated.html">Bender_isoCHA425HV</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/NfcReaders/index.html">NfcReaders</a><input aria-label="Toggle navigation of NfcReaders" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/NfcReaders/NxpNfcFrontendTokenProvider/autogenerated.html">NxpNfcFrontendTokenProvider</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/NfcReaders/PN532TokenProvider/autogenerated.html">PN532TokenProvider</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/NfcReaders/PN7160TokenProvider/autogenerated.html">PN7160TokenProvider</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/index.html">PowerMeters</a><input aria-label="Toggle navigation of PowerMeters" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/AST_DC650/autogenerated.html">AST_DC650</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/Acrel_DJSF1352_RN/autogenerated.html">Acrel_DJSF1352_RN</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/DZG_GSH01/autogenerated.html">DZG_GSH01</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/GenericPowermeter/autogenerated.html">GenericPowermeter</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/IsabellenhuetteIemDcr/autogenerated.html">IsabellenhuetteIemDcr</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerMeters/LemDCBM400600/autogenerated.html">LemDCBM400600</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/index.html">PowerSupplies</a><input aria-label="Toggle navigation of PowerSupplies" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/DPM1000/autogenerated.html">DPM1000</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/Huawei_R100040Gx/autogenerated.html">Huawei_R100040Gx</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/Huawei_V100R023C10/autogenerated.html">Huawei_V100R023C10</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/InfyPower/autogenerated.html">InfyPower</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/InfyPower_BEG1K075G/autogenerated.html">InfyPower_BEG1K075G</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/UUGreenPower_UR1000X0/autogenerated.html">UUGreenPower_UR1000X0</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/modules/HardwareDrivers/PowerSupplies/Winline/autogenerated.html">Winline</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/Misc/index.html">Misc</a><input aria-label="Toggle navigation of Misc" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/ChargerInfo/autogenerated.html">ChargerInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/ErrorHistory/autogenerated.html">ErrorHistory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/Linux_Systemd_Rauc/autogenerated.html">Linux_Systemd_Rauc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/LocalAllowlistTokenValidator/autogenerated.html">LocalAllowlistTokenValidator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/PacketSniffer/autogenerated.html">PacketSniffer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/PersistentStore/autogenerated.html">PersistentStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/SerialCommHub/autogenerated.html">SerialCommHub</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/Setup/autogenerated.html">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/Store/autogenerated.html">Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/System/autogenerated.html">System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Misc/YamlStore/autogenerated.html">YamlStore</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/Simulation/index.html">Simulation</a><input aria-label="Toggle navigation of Simulation" class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Simulation/DCSupplySimulator/autogenerated.html">DCSupplySimulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Simulation/IMDSimulator/autogenerated.html">IMDSimulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Simulation/OVMSimulator/autogenerated.html">OVMSimulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Simulation/SlacSimulator/autogenerated.html">SlacSimulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Simulation/YetiSimulator/autogenerated.html">YetiSimulator</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/modules/Testing/index.html">Testing</a><input aria-label="Toggle navigation of Testing" class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummyBankSessionTokenProvider/autogenerated.html">DummyBankSessionTokenProvider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummySessionCostProvider/autogenerated.html">DummySessionCostProvider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummyTokenProvider/autogenerated.html">DummyTokenProvider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummyTokenProviderManual/autogenerated.html">DummyTokenProviderManual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummyTokenValidator/autogenerated.html">DummyTokenValidator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/modules/Testing/DummyV2G/autogenerated.html">DummyV2G</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/interfaces_index.html">EVerest Interfaces</a><input aria-label="Toggle navigation of EVerest Interfaces" class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ISO15118_charger.html">ISO15118_charger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ISO15118_ev.html">ISO15118_ev</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ISO15118_vas.html">ISO15118_vas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ac_rcd.html">ac_rcd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/auth.html">auth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/auth_token_provider.html">auth_token_provider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/auth_token_validator.html">auth_token_validator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/bank_session_token_provider.html">bank_session_token_provider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/car_simulator.html">car_simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/charger_information.html">charger_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/connector_lock.html">connector_lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/dc_external_derate.html">dc_external_derate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/debug_json.html">debug_json</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/display_message.html">display_message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/empty.html">empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/energy.html">energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/energy_manager.html">energy_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/energy_price_information.html">energy_price_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/error_history.html">error_history</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ev_board_support.html">ev_board_support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ev_manager.html">ev_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ev_slac.html">ev_slac</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/evse_board_support.html">evse_board_support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/evse_manager.html">evse_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/evse_security.html">evse_security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/example.html">example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/example_error_framework.html">example_error_framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/example_user.html">example_user</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/external_energy_limits.html">external_energy_limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/generic_error.html">generic_error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/iso15118_extensions.html">iso15118_extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/isolation_monitor.html">isolation_monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/kvs.html">kvs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ocpp.html">ocpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ocpp_1_6_charge_point.html">ocpp_1_6_charge_point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/ocpp_data_transfer.html">ocpp_data_transfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/over_voltage_monitor.html">over_voltage_monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/payment_terminal.html">payment_terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/power.html">power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/power_supply_DC.html">power_supply_DC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/powermeter.html">powermeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/reservation.html">reservation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/serial_communication_hub.html">serial_communication_hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/session_cost.html">session_cost</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/slac.html">slac</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/solar_forecast.html">solar_forecast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/sunspec_ac_meter.html">sunspec_ac_meter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/sunspec_reader.html">sunspec_reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/sunspec_scanner.html">sunspec_scanner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/system.html">system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/test_control.html">test_control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/tibber_price_forecast.html">tibber_price_forecast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/interfaces/uk_random_delay.html">uk_random_delay</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/types_index.html">EVerest Types</a><input aria-label="Toggle navigation of EVerest Types" class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/authorization.html">authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/board_support_common.html">board_support_common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/charger_information.html">charger_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/dc_external_derate.html">dc_external_derate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/display_message.html">display_message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/energy.html">energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/energy_price_information.html">energy_price_information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/error_history.html">error_history</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/ev_board_support.html">ev_board_support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/evse_board_support.html">evse_board_support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/evse_manager.html">evse_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/evse_security.html">evse_security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/iso15118.html">iso15118</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/iso15118_vas.html">iso15118_vas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/isolation_monitor.html">isolation_monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/money.html">money</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/ocpp.html">ocpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/payment_terminal.html">payment_terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/power_supply_DC.html">power_supply_DC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/powermeter.html">powermeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/reservation.html">reservation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/serial_comm_hub_requests.html">serial_comm_hub_requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/session_cost.html">session_cost</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/sunspec_ac_meter.html">sunspec_ac_meter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/system.html">system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/temperature.html">temperature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/text_message.html">text_message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/uk_random_delay.html">uk_random_delay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/units.html">units</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/types/units_signed.html">units_signed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/api/autogenerated_api_index.html">EVerest API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/snapshot.html">Dependencies Snapshot</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../qa/index.html">Q &amp; A</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../project/index.html">Project &amp; Community</a><input aria-label="Toggle navigation of Project &amp; Community" class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../project/community.html">Meet the EVerest Community</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/contributing.html">Contributing to EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/governance/governance.html">EVerest project governance policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/governance/code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/governance/security.html">Security Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/releases/releases-and-versioning.html">Releases and Versioning of EVerest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/releases/breaking-changes.html">Breaking Changes Definition</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/explanation/energymanagement/index.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="energy-management-in-everest">
<span id="exp-energymanagement"></span><h1>Energy Management in EVerest<a class="headerlink" href="#energy-management-in-everest" title="Link to this heading"></a></h1>
<p>This section provides an in-depth explanation of the energy management concept
implemented in EVerest.
It covers the representation of energy systems as energy trees, the handling of
energy requests and distribution, and the configuration of energy trees within
EVerest. The central modules involved in this concept are the
<a class="reference internal" href="../../reference/modules/EnergyManagement/EnergyManager/autogenerated.html#everest-modules-energymanager"><span class="std std-ref">EnergyManager</span></a> and
<a class="reference internal" href="../../reference/modules/EnergyManagement/EnergyNode/autogenerated.html#everest-modules-energynode"><span class="std std-ref">EnergyNode</span></a> modules.</p>
<p>One of its central ideas of EVerests energymanagement to represent the energy
system for which power is distributed as an energy tree containing energy nodes.
This enables the representation of arbitrarily complex configurations of
physical and logical components within the targeted energy system.</p>
<p>The following sections present this concept in more detail.</p>
<section id="energy-nodes">
<h2>Energy nodes<a class="headerlink" href="#energy-nodes" title="Link to this heading"></a></h2>
<p>An energy node can be either a logical or physical component within the energy
system.</p>
<p>Energy nodes can typically be classified into the following categories:</p>
<ul class="simple">
<li><p><strong>Physical Components</strong>: Circuit breakers, electrical fuses</p></li>
<li><p><strong>Logical Components</strong>: Limits from OCPP, EEBus, or other external sources</p></li>
<li><p><strong>Charging Stations</strong>: Unidirectional or bidirectional charging stations
(or in general any sink or source of power)</p></li>
</ul>
<p>An EVerest module becomes an energy node by implementing the
<a class="reference internal" href="../../reference/interfaces/energy.html"><span class="doc">energy</span></a> interface.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the time of writing, two EVerest modules are considered energy nodes as
per the above definition: <strong>EnergyNode</strong> and <strong>EvseManager</strong>.
More may be added in the future.
The <strong>EnergyNode</strong> module fulfills central aspects of the energy management
concept.
When the term <strong>EnergyNode</strong> is used, it refers to the actual module,
whereas <strong>energy node</strong> refers to the general definition above.</p>
</div>
<p>The <strong>EnergyNode</strong> module both requires and provides the
<a class="reference internal" href="../../reference/interfaces/energy.html"><span class="doc">energy</span></a> interface.
This design enables the representation of arbitrary energy tree configurations
within the EVerest configuration file as explained in detail in a later
section.</p>
</section>
<section id="energy-trees">
<h2>Energy trees<a class="headerlink" href="#energy-trees" title="Link to this heading"></a></h2>
<p>Energy trees are used to model various energy system configurations.
Below are examples demonstrating how energy systems can be represented in
EVerest.</p>
<p>The simplest energy tree consists of a single leaf node representing an EVSE
with a physical hardware capability of 32 A on 3 phases.</p>
<img alt="../../_images/single_node.drawio.svg" class="align-center" id="single-node-label" src="../../_images/single_node.drawio.svg" />
<p>Typically, the electrical connection of charging stations is protected by a
circuit breaker.
Adding this to the representation results in:</p>
<img alt="../../_images/single_node_with_circuit_breaker.drawio.svg" class="align-center" id="single-node-with-circuit-breaker-label" src="../../_images/single_node_with_circuit_breaker.drawio.svg" />
<p>In this example, the circuit breaker limits the current to 16 A, even though
the EVSE supports 32 A.
The module managing power distribution must enforce this limitation.</p>
<p>For a more complex setup, consider the following example:</p>
<img alt="../../_images/energy_tree.drawio.svg" class="align-center" id="energy-tree-label" src="../../_images/energy_tree.drawio.svg" />
<p>Here, a top-level circuit breaker limits the line to 63 A.
Two additional circuit breakers protect the lines to two EVSEs, each fused at
32 A.
EVSE1 can consume 16 A on three phases, while EVSE2 can consume 32 A on three
phases.
This module accounts for all existing limitations when distributing power to
energy nodes.</p>
<p>All the scenarios above can be represented within EVerest.
The power distribution to the EVSEs is managed by this module, considering the
limitations of each individual node.
How these setups above can be represented in EVerest is presented in section
<a class="reference internal" href="#configuration-of-energy-trees-in-everest"><span class="std std-ref">Configuration of energy trees in EVerest</span></a>.</p>
</section>
<section id="energy-requests-and-distribution">
<h2>Energy requests and distribution<a class="headerlink" href="#energy-requests-and-distribution" title="Link to this heading"></a></h2>
<p>The EnergyManager module requires exactly one module implementing the
<a class="reference internal" href="../../reference/interfaces/energy.html"><span class="doc">energy</span></a> interface.
This interface defines:</p>
<ul class="simple">
<li><p>A single variable <strong>energy_flow_request</strong> of type <strong>EnergyFlowRequest</strong></p></li>
<li><p>A single command <strong>enforce_limits</strong></p></li>
</ul>
<p>The concept of the usage of this interface is further described in the
following sections.</p>
<section id="energy-flow-request-variable">
<h3>Energy flow request variable<a class="headerlink" href="#energy-flow-request-variable" title="Link to this heading"></a></h3>
<p>The <strong>EnergyFlowRequest</strong> type is recursive, containing a list of child
<strong>EnergyFlowRequest</strong>.
It defines the power and current requested by an energy node, along with its
limitations (e.g., hardware or software constraints).
In essence, a module specifies its requirements and limitations through this
type, which are then communicated to its parent node.
The parent node creates an aggregated <strong>EnergyFlowRequest</strong>, incorporating its
own limitations and the requests from its children.</p>
<p>Energy flow requests are constructed from the leaves to the root of the energy
tree, resulting in a single <strong>EnergyFlowRequest</strong> that contains all child
requests.
This final request serves as input for this module, which calculates the limits
to enforce down the tree.</p>
<p>The following diagram illustrates how energy nodes communicate requests, with
green arrows representing energy flow requests:</p>
<img alt="../../_images/energy_tree_request_and_distribution.drawio.svg" class="align-center" id="energy-tree-request-and-distribution-label" src="../../_images/energy_tree_request_and_distribution.drawio.svg" />
</section>
<section id="enforcing-limits">
<h3>Enforcing limits<a class="headerlink" href="#enforcing-limits" title="Link to this heading"></a></h3>
<p>The <strong>enforce_limits</strong> command propagates limits down the tree.
Each energy node calls this function on its child nodes to enforce calculated
limits.</p>
<p>Note that the EnergyManager itself does not represent an energy node.
It communicates the resulting <strong>EnergyFlowRequest</strong> to a single connected
energy node, which then propagates the limits further down the tree.</p>
</section>
</section>
<section id="details-of-the-energyflowrequest-type">
<h2>Details of the EnergyFlowRequest type<a class="headerlink" href="#details-of-the-energyflowrequest-type" title="Link to this heading"></a></h2>
<p>Energy nodes may have varying types of limits.
To understand this better, consider a zoomed-in view of an energy node:</p>
<img alt="../../_images/zoom_in_energy_node.drawio.svg" class="align-center" id="zoom-in-energy-node-label" src="../../_images/zoom_in_energy_node.drawio.svg" />
<p>In reality, an energy node may have different limits for charging (import) and
discharging (export).
The <strong>EnergyFlowRequest</strong> type accounts for this distinction:</p>
<ul class="simple">
<li><p><strong>Import</strong>: Energy flow direction from the grid to the consumer/EV (charging)</p></li>
<li><p><strong>Export</strong>: Energy flow direction from the EV to the grid (discharging)</p></li>
</ul>
<p>Additionally, each direction may have separate limits for the root and leaf
sides of the energy node.
For example, a DC power supply may have AC limits on the root side (facing the
grid) and DC limits on the leaf side (facing the EV).</p>
<p>Limits may also change over time, which is why the <em>schedule_import</em> and
<em>schedule_export</em> properties are lists containing multiple limit
specifications.</p>
<p>Besides the limiting schedules for import and export, it also contains
a <em>setpoint_schedule</em>. This is a list (time series) just like the limiting schedules
and it may contain setpoints for each timeslot, see below for a more detailed description.</p>
<p>Each value that is given for a limit or schedule has a source property (string).
It is used to track which value is the actual limiting factor for the result in the
optimization algorithm.</p>
<p>This is useful to understand how the result that is sent to the EvseManager is composed.</p>
<p>Below is an example JSON representation of an <strong>EnergyFlowRequest</strong> for a leaf node:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;children&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;evse_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Charging&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;node_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Evse&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;priority_request&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;schedule_export&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;limits_to_leaves&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ac_max_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_leave&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;limits_to_root&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ac_max_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">16.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_root&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_max_phase_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_phase&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_min_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_mincurrent&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_min_phase_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_minphase&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_number_of_active_phases&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ac_supports_changing_phases_during_charging&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-17T13:08:36.479Z&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;schedule_import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;limits_to_leaves&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ac_max_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">32.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_leave&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;limits_to_root&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ac_max_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">32.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_root&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_max_phase_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_phase&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_min_current_A&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">6.0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_mincurrent&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_min_phase_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EVSE1_minphase&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ac_number_of_active_phases&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ac_supports_changing_phases_during_charging&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-17T13:08:36.479Z&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;schedule_setpoints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;evse1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="setpoints">
<h2>Setpoints<a class="headerlink" href="#setpoints" title="Link to this heading"></a></h2>
<p>Setpoints can optionally be specified for each time slot. Note that the schedule_setpoints list
may have different timestamp entries then the limiting schedules.</p>
<p>A setpoint entry may have an ampere or watt limit or specify a Watt-Grid Frequency table as setpoint.
Only one of those three options may be set in each timeslot, but they may be different for each timeslot.</p>
<p>The priority property is intended to be used if multiple conflicting setpoints exist in the energy tree.
This is not implemented for now, the priority property will be ignored for now.</p>
<p>In most cases a setpoint is not neccessary as the same functionality can also be implemented by setting the
limits at the node appropriately.
It is especially useful for the bidirectional use case, as it selects whether charging or discharging should be performed:</p>
<p>E.g. with watt limits of -10kW to +10kW and a setpoint of -2kW, it will discharge at 2kW.
A setpoint of +3kW will switch to charging without changing the limits.</p>
<p>The Frequency based watt limit table can be set through e.g. OCPP 2.1 smart charging. It is intended to
specifiy a grid stabilizing mode, in which the charger charges when the grid frequency is too high and discharges
to support the grid if the frequency is too low.</p>
</section>
<section id="external-limits">
<h2>External limits<a class="headerlink" href="#external-limits" title="Link to this heading"></a></h2>
<p>External limits can be added to the energy system using EVerest modules
implementing the
<a class="reference internal" href="../../reference/interfaces/external_energy_limits.html"><span class="doc">external_energy_limits</span></a>
interface.
At the time of writing, the <strong>EnergyNode</strong> module is the sole module that
provides this functionality.</p>
<p>The <cite>external_energy_limits</cite> interface defines the <strong>set_external_limits</strong>
command, which modules like OCPP or API can use to specify external energy
limits.
These limits are then considered by the <strong>EnergyNode</strong> module when creating
its energy flow request.</p>
<p>To apply external limits, a module must require the <cite>external_energy_limits</cite>
interface and invoke the <strong>set_external_limits</strong> command.
The next section details how to configure these limits in EVerest.</p>
</section>
<section id="configuration-of-energy-trees-in-everest">
<span id="id1"></span><h2>Configuration of energy trees in EVerest<a class="headerlink" href="#configuration-of-energy-trees-in-everest" title="Link to this heading"></a></h2>
<p>The following section describes how to configure the EVerest configuration file
in order to represent the targeted energy tree.
In order to do that we are using a complex energy tree example and implement
this in the configuration step by step.</p>
<p>This is the energy tree that we are going to represent in the EVerest
configuration:</p>
<img alt="Example of a complex energy tree" class="align-center" id="energy-tree-complex-label" src="../../_images/energy_tree_complex.drawio.svg" />
<p>This energy tree represents a setup with two EVSEs.
There are two external sources that are able to provide external energy limits:
OCPP and the API module.</p>
<p>OCPP is able to set external limits for each EVSE as well as for the whole
charging station.
This is indicated by the three arrows labeled with OCPP.
The API module is only able to set the limits for the two EVSEs, but not for
the whole charging station.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To improve readability, unrelated module configurations and connections are
omitted in the examples below.</p>
</div>
<p>First, we add two EvseManager modules to the config file representing our
energy leaf nodes.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
</pre></div>
</div>
<p>The two EVSEs can receive limits from OCPP.
Therefore, we add two <strong>EnergyNode</strong> modules that represent the sinks for the
external limits.
The <strong>EnergyNode</strong> module requires a connection to a module implementing the
<a class="reference internal" href="../../reference/interfaces/energy.html"><span class="doc">energy</span></a> interface.
This is implemented by connecting the previously added EvseManager modules to it.</p>
<p>Any external limit applied to the added EnergyNode modules will be applied to
its energy child nodes (the EvseManager modules) now.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">ocpp_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_1</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_2</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
</pre></div>
</div>
<p>We continue with adding <strong>EnergyNode</strong> modules that represent the sinks for the
limits received by the API module.
Note that the <strong>EnergyNode</strong> module provides and requires the
<a class="reference internal" href="../../reference/interfaces/energy.html"><span class="doc">energy</span></a> interface at the same time.
This allows us to connect <strong>EnergyNode</strong> modules and therefore fullfill the
requirement of others.</p>
<p>Note that the modules <strong>ocpp_sink_1</strong> and <strong>ocpp_sink_2</strong> are connected to the
<strong>api_sink_1</strong> and <strong>api_sink_2</strong>.
This means that both limits can be considered by this module without
overriding each other.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">ocpp_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_1</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_2</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
</pre></div>
</div>
<p>We are now only missing a represention for the complete charging station.
Therefore, we add another <strong>EnergyNode</strong> module with a fuse limit of 63 A and
we name it <strong>grid_connection_point</strong>.
We connect <strong>api_sink_1</strong> and <strong>api_sink_2</strong> to it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">ocpp_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_1</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_2</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">grid_connection_point</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">config_module</span><span class="p">:</span>
<span class="w">            </span><span class="nt">fuse_limit_A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">63</span>
<span class="w">            </span><span class="nt">phase_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
</pre></div>
</div>
<p>Now we have the complete energy tree represented, but were still missing to
include the modules that set the external energy limits, so the OCPP and API
module.
Since these modules require (optionally multiple) connections to modules
implementing the
<a class="reference internal" href="../../reference/interfaces/external_energy_limits.html"><span class="doc">external_energy_limits</span></a>
interface, we need to also add the connections to the <strong>EnergyNode</strong> modules we
have added previously.
Finally, we also add the <strong>EnergyManager</strong> module and connect the
<strong>grid_connection_point</strong> to it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">    </span><span class="nt">ocpp_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_1</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_2</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">grid_connection_point</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">config_module</span><span class="p">:</span>
<span class="w">            </span><span class="nt">fuse_limit_A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">63</span>
<span class="w">            </span><span class="nt">phase_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OCPP</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">evse_energy_sink</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grid_connection_point</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">    </span><span class="nt">api</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">evse_energy_sink</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">    </span><span class="nt">energy_manager</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyManager</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_trunk</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grid_connection_point</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
</pre></div>
</div>
<p>We have now added all the required modules and connections to represent the
energy tree example <a class="reference internal" href="#energy-tree-complex-label"><span class="std std-ref">shown above</span></a>.
One important detail is still missing, which is the module mapping.
For detailed information about the module mapping please see
<a class="reference internal" href="../tier-module-mappings.html"><span class="doc">3-tier module mappings</span></a>.</p>
<p>Since the connections of a module in the EVerest config does not automatically
map to a specific EVSE (or the whole charging station, represented by EVSE#0),
the <strong>EnergyNode</strong> modules must have a module mapping.
This allows the modules that make use of the <strong>set_external_limits</strong> command to
call it for the correct node.</p>
<p>Modules like OCPP and API can only know at which requirement the command
<strong>set_external_limit</strong> shall be called in case the energy node that is
connected to it has a specified module mapping in the EVerest config.</p>
<p>This is a full example including the module mappings:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">active_modules</span><span class="p">:</span>
<span class="w">    </span><span class="nt">evse_manager_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">evse_manager_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EvseManager</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">ocpp_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_1</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evse_manager_2</span>
<span class="w">              </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">api_sink_2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">grid_connection_point</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyNode</span>
<span class="w">        </span><span class="nt">mapping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">module</span><span class="p">:</span>
<span class="w">                </span><span class="nt">evse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">config_module</span><span class="p">:</span>
<span class="w">            </span><span class="nt">fuse_limit_A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">63</span>
<span class="w">            </span><span class="nt">phase_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_consumer</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
<span class="w">    </span><span class="nt">ocpp</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OCPP</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">evse_energy_sink</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grid_connection_point</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ocpp_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">    </span><span class="nt">api</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">evse_energy_sink</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_1</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_sink_2</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_limits</span>
<span class="w">    </span><span class="nt">energy_manager</span><span class="p">:</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnergyManager</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">energy_trunk</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">module_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grid_connection_point</span>
<span class="w">                </span><span class="nt">implementation_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">energy_grid</span>
</pre></div>
</div>
</section>
<section id="energy-distribution">
<h2>Energy distribution<a class="headerlink" href="#energy-distribution" title="Link to this heading"></a></h2>
<p>The EnergyManager module implements an algorithm to distribute available power
to energy leaf nodes:</p>
<ul class="simple">
<li><p>It calculates and enforces limits for each energy leaf node in the tree.</p></li>
<li><p>It ensures that no node exceeds its specified limits for current, power, or
phase count.</p></li>
<li><p>It distributes power equally among child nodes, if their collective request
exceeds the parent nodes limits.</p></li>
<li><p>The algorithm prefers charging over discharging if the specified limits allow
for both.</p></li>
<li><p>It supports phase switching between single-phase and three-phase modes,
optimizing power usage for low-demand scenarios if
<strong>switch_3ph1ph_while_charging_mode</strong> is enabled.</p></li>
</ul>
</section>
<section id="phase-switching">
<h2>Phase switching<a class="headerlink" href="#phase-switching" title="Link to this heading"></a></h2>
<p>This module supports switching between single-phase (1ph) and three-phase (3ph)
configurations during AC charging.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some vehicles (such as the first generation of Renault Zoe) may be
permanently damaged when switching from 1ph to 3ph during charging.
Use at your own risk!</p>
</div>
<p>To use this feature, several configurations must be enabled across different
EVerest modules:</p>
<ul class="simple">
<li><p><strong>EvseManager</strong>: Adjust the following configuration options to your needs:
- <code class="docutils literal notranslate"><span class="pre">switch_3ph1ph_delay_s</span></code>
- <code class="docutils literal notranslate"><span class="pre">switch_3ph1ph_cp_state</span></code></p></li>
<li><p><strong>Module implementing the `evse_board_support &lt;/reference/interfaces/evse_board_support&gt;` interface:</strong>
- Set <code class="docutils literal notranslate"><span class="pre">supports_changing_phases_during_charging</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the reported capabilities.
- Define the minimum number of phases as 1 and the maximum as 3.
- Ensure the <code class="docutils literal notranslate"><span class="pre">ac_switch_three_phases_while_charging</span></code> command is implemented.</p></li>
<li><p><strong>EnergyManager</strong>: Adjust the following config options to your needs:
- switch_3ph1ph_while_charging_mode
- switch_3ph1ph_max_nr_of_switches_per_session
- switch_3ph1ph_switch_limit_stickyness
- switch_3ph1ph_power_hysteresis_W
- switch_3ph1ph_time_hysteresis_s</p></li>
</ul>
<p>Refer to the manifest.yaml for documentation of these configuration options.</p>
<p>If all of these are properly configured, the EnergyManager will handle the
1ph/3ph switching.
To enable this, an external limit must be set.
There are two ways to configure the limit:</p>
<ol class="arabic simple">
<li><p><strong>Watt-based limit (preferred option):</strong> The limit is set in Watts (not
Amperes), even though this involves AC charging.
This provides the EnergyManager with the flexibility to decide when to
switch.
The limit can be defined by an OCPP schedule or through an additional
EnergyNode.</p></li>
<li><p><strong>Ampere-based limit:</strong> The limit is defined in Amperes, along with a
restriction on the number of phases (e.g., <code class="docutils literal notranslate"><span class="pre">min_phase=1</span></code> and
<code class="docutils literal notranslate"><span class="pre">max_phase=1</span></code>).
This enforces switching and allows external control over the switching time,
but the EnergyManager loses its ability to choose when to switch.</p></li>
</ol>
<section id="best-practices">
<h3>Best practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h3>
<p>In general, this feature works best in a configuration with 32 A per phase and
a Watt-based limit.
In this setup, there is an overlap between the single phase and three phase
domain:</p>
<ul class="simple">
<li><p>Single-phase charging: 1.3 kW to 7.4 kW</p></li>
<li><p>Three-phase charging: 4.2 kW to 22 kW (or 11 kW)</p></li>
</ul>
<p>This avoids switching too often in the most elegant way.
Other methods to reduce the number of switch cycles can be configured in the
EnergyManager, see config options above.</p>
</section>
</section>
<section id="current-limitations">
<h2>Current limitations<a class="headerlink" href="#current-limitations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The algorithm does not account for real-time power meter readings from
individual nodes.</p></li>
<li><p>It does not redistribute unused power when the actual consumption is below
the assigned target value.</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../dev-tools/edm.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">edm</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../adapt-everest/apis.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">EVerest APIs</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2025, EVerest community
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Energy Management in EVerest</a><ul>
<li><a class="reference internal" href="#energy-nodes">Energy nodes</a></li>
<li><a class="reference internal" href="#energy-trees">Energy trees</a></li>
<li><a class="reference internal" href="#energy-requests-and-distribution">Energy requests and distribution</a><ul>
<li><a class="reference internal" href="#energy-flow-request-variable">Energy flow request variable</a></li>
<li><a class="reference internal" href="#enforcing-limits">Enforcing limits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#details-of-the-energyflowrequest-type">Details of the EnergyFlowRequest type</a></li>
<li><a class="reference internal" href="#setpoints">Setpoints</a></li>
<li><a class="reference internal" href="#external-limits">External limits</a></li>
<li><a class="reference internal" href="#configuration-of-energy-trees-in-everest">Configuration of energy trees in EVerest</a></li>
<li><a class="reference internal" href="#energy-distribution">Energy distribution</a></li>
<li><a class="reference internal" href="#phase-switching">Phase switching</a><ul>
<li><a class="reference internal" href="#best-practices">Best practices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#current-limitations">Current limitations</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=fcd382bf"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    </body>
</html>