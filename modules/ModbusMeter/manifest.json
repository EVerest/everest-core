{
    "description": "Module that collects power and energy measurements from a MODBUS device",
	"provides": {
		"main": {
			"description": "This is the main unit of the module",
			"interface": "powermeter",
			"config": {
				"modbus_ip_address": {
				    "description": "The ip address which should be used to get the modbus values",
				    "type": "string",
				    "pattern": "^(?:[0-9]{1,3}.){3}[0-9]{1,3}$"
				},
				"modbus_port": {
				    "description": "The port which should be used to get the modbus values",
				    "type": "integer",
				    "minimum": 0
				},
				"power_unit_id": {
					"description" : "Modbus unit_id, mostly 1",
					"type": "integer",
					"minimum": 1,
					"maximum": 255
				},
				"power_in_register": {
					"description" : "Modbus register for power in Watts imported",
					"type": "integer",
					"minimum": 0
				},
				"power_in_length": {
					"description" : "Amount of modbus registers uint16 = 1, uint32 = 2, uint64 = 4",
					"type": "integer",
					"enum": [2]
				},
				"power_out_register": {
					"description" : "Modbus register for power in Watts exported",
					"type": "integer",
					"minimum": 0
				},
				"power_out_length": {
					"description" : "Amount of modbus registers uint16 = 1, uint32 = 2, uint64 = 4",
					"type": "integer",
					"enum": [2]
				},
				"energy_unit_id": {
					"description" : "Modbus unit_id, mostly 1",
					"type": "integer",
					"minimum": 1,
					"maximum": 255
				},
				"energy_in_register": {
					"description" : "Modbus register for energy in Watthours imported",
					"type": "integer",
					"minimum": 0
				},
				"energy_in_length": {
					"description" : "Amount of modbus registers uint16 = 1, uint32 = 2, uint64 = 4",
					"type": "integer",
					"enum": [2]
				},
				"energy_out_register": {
					"description" : "Modbus register for energy in Watthours imported",
					"type": "integer",
					"minimum": 0
				},
				"energy_out_length": {
					"description" : "Amount of modbus registers uint16 = 1, uint32 = 2, uint64 = 4",
					"type": "integer",
					"enum": [2]
				},
				"update_interval": {
				    "description": "Update interval in milliseconds.",
				    "type": "integer",
				    "minimum": 0
				}
			}
		}
	},
    "enable_external_mqtt": true,
	"metadata": {
		"license": "https://opensource.org/licenses/Apache-2.0",
		"authors": [
            "Andreas Heinrich",
            "Leonardo Fernandes"
        ]
	}
}
