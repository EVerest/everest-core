description: Driver for Winline ACDC power supply. Supports multiple Winline modules using CAN protocol either in fixed address mode or group discovery mode.
config:
  can_device:
    description: CAN interface name
    type: string
    default: can0
  module_addresses:
    description: >-
      Module Addresses to use. Set to "0" for broadcast. Make sure to connect only one PSU on the CAN bus in broadcast mode, otherwise
      it will charge at a too high current (as every module will produce the full current the EV requests!)
      If you have multiple PSUs, use individual addresses and list them comma separated, e.g. "1,2". Then it will share the current between
      these PSUs.
    type: string
    default: ""
  group_address:
    description: >-
      Group address. Use this if your PSUs using automatic allocation of the addresses.
      If you have multiple PSUs, set this number in accordance with the group dial
      setting of the PSUs you want to use.
      Can't use module addresses and group address at the same time, if both are set, the module addresses will be used.
    type: integer
    default: 0
  device_connection_timeout_s:
    description: >-
      Timeout in seconds to wait for a module to respond before considering it offline.
      CRITICAL SAFETY: Must be greater than module internal timeout to prevent overcurrent risk.
      Recommended: 15s.
    type: integer
    default: 15
  conversion_efficiency_export:
    description: Conversion efficiency of the export mode.
    type: number
    default: 0.95
  controller_address:
    description: Controller address defaults to 0xF0.
    type: integer
    default: 240
  min_export_voltage_V:
    description: Minimum export voltage limit (V)
    type: number
    default: 50.0
  max_export_voltage_V:
    description: Maximum export voltage limit (V)
    type: number
    default: 1000.0
  min_export_current_A:
    description: Minimum export current limit (A)
    type: number
    default: 0.0
  max_export_current_A:
    description: Maximum export current limit (A) - will be updated by device rated values
    type: number
    default: 133.3
  power_state_grace_period_ms:
    description: Grace period in milliseconds to wait before verifying power state changes
    type: integer
    default: 2000
  current_regulation_tolerance_A:
    description: Current regulation tolerance (A)
    type: number
    default: 0.5
  peak_current_ripple_A:
    description: Peak current ripple (A)
    type: number
    default: 2
  altitude_setting_m:
    description: >-
      Working altitude setting in meters. This affects the power derating of the modules
      at high altitudes. Valid range: 1000-5000m. Default: 1000m (sea level).
    type: integer
    default: 1000
  input_mode:
    description: >-
      Input mode for the power supply modules. AC mode for AC input, DC mode for DC input.
      This setting affects the internal configuration of the modules.
    type: string
    default: "AC"
    enum:
      - "AC"
      - "DC"
provides:
  main:
    description: Main interface
    interface: power_supply_DC
    config: {}
metadata:
  license: https://pionix.com/pionix-license-terms
  authors:
  - Florin Mihut
