{
  "name": "EVerest - ${localWorkspaceFolderBasename}",

  // Compose configuration
  "dockerComposeFile": [
    "../docker-compose.yml",
    "./docker-compose.devcontainer.yml"
  ],
  "service": "devcontainer",
  "runServices": [ "mqtt-server", "ocpp-db", "steve", "mqtt-explorer" ],

  // Workspace inside the container
  "workspaceFolder": "/workspace",

  // Prevent generation of broken override compose files
  "overrideFeatureInstallCommand": false,
  "updateRemoteUserUID": false,

  // Networking / forwarded ports
  "remoteUser": "docker",
  "forwardPorts": [
    "mqtt-explorer:4000",
    "steve:8180"
  ],
  "portsAttributes": {
    "mqtt-explorer:4000": {
      "label": "MQTT Explorer - WebView"
    },
    "steve:8180": {
      "label": "Steve - WebTool"
    }
  },
  "otherPortsAttributes": {
    "onAutoForward": "notify",
    "protocol": "http",
    "requireLocalPort": false
  },

  // VS Code customizations
  "customizations": {

    // Be aware that anything set here will not apply to the devcontainer
    // when used without VS Code (e.g., plain Docker Compose).
    "vscode": {
      "settings": {
        "terminal.integrated.profiles.linux": {
          "bash": {
            "path": "/bin/bash",
            "icon": "terminal-bash",
            "args": ["-l"]
          }
        },
        "terminal.integrated.defaultProfile.linux": "bash",
        "python.pythonPath": "/usr/bin/python3",
        "python.defaultInterpreterPath": "/usr/bin/python3",
        "editor.rulers": [79, 120],

        // RST
        "restructuredtext.preview.scrollEditorWithPreview": false,
        "restructuredtext.pythonRecommendation.disabled": true
      },

      "extensions": [
        // language support CPP
        "ms-vscode.cpptools",

        // language support cmake
        "twxs.cmake",
        "ms-vscode.cmake-tools",

        // language support python
        "ms-python.python",

        // language support reStructuredText
        "lextudio.restructuredtext",
        "trond-snekvik.simple-rst"
      ]
    }
  }
}
